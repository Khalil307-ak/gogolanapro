const translations = {
    en: {
        title: "Basics and Getting Started with Python",
        "page-title": "Basics and Getting Started with Python",
        home: "Home",
        about: "About",
        courses: "Courses",
        contact: "Contact",
        "section-title": "Basics and Getting Started with Python",
        intro: "Python is a powerful and easy-to-learn programming language. It is used in web development, data analysis, artificial intelligence, and machine learning. In this guide, we will cover the basics and explore how to get started with Python step by step.",
        "why-python": "Why Learn Python?",
        "why-python-desc": "Python is known for its simple syntax, making it ideal for beginners. It has powerful libraries like <code>pandas</code>, <code>numpy</code>, and <code>tensorflow</code> used in advanced fields. Python is the top choice for companies like Google and Netflix.",
        installation: "Installing Python",
        "installation-desc": "To get started, download the latest version of Python from <a href='https://www.python.org/downloads/' target='_blank' rel='noopener noreferrer' class='resource-link' aria-label='Download Python from the official website'>the official Python website</a>. Follow these steps:",
        "install-windows": "For Windows: Download the installer and ensure you check 'Add Python to PATH'.",
        "install-mac": "For macOS: Use Homebrew (<code>brew install python</code>) or the installer from the official website.",
        "install-linux": "For Linux: Use <code>sudo apt install python3</code> (for Ubuntu) or your system's package manager.",
        "verify-install": "Verify the installation by running: <code>python3 --version</code> or <code>python --version</code>.",
        "first-steps": "First Steps",
        "first-steps-desc": "Start by writing simple programs to understand Python's syntax.",
        "writing-code": "Writing Your First Program: Open a text editor and write: <code>print('Hello, World!')</code>. Save the file as <code>hello.py</code> and run it using <code>python3 hello.py</code>.",
        "run-code": "Save the code in a file named <code>hello.py</code> and run it with <code>python3 hello.py</code>.",
        "basic-syntax": "Basic Syntax",
        "basic-syntax-desc": "Python relies on simple code. Here are some basic examples:",
        variables: "Variables:",
        conditionals: "Conditionals:",
        loops: "Loops:",
        functions: "Functions",
        "functions-desc": "Functions allow code reuse. Example:",
        lists: "Lists",
        "lists-desc": "Lists are used to store a collection of data:",
        projects: "Practical Projects",
        "projects-desc": "Try these simple projects to apply your skills:",
        "project-calculator": "Simple Calculator",
        "project-calculator-desc": "Write a program that takes two numbers and an operation from the user:",
        "project-game": "Number Guessing Game",
        "project-game-desc": "A program that picks a random number and asks the user to guess it:",
        resources: "Educational Resources",
        "resources-desc": "Explore these resources to learn more:",
        "next-steps": "Next Steps",
        "next-steps-desc": "After mastering the basics, try these advanced topics:",
        "next-steps-oop": "Object-Oriented Programming (OOP): Learn classes and inheritance.",
        "next-steps-libraries": "Python Libraries: Try <code>pandas</code> for data analysis or <code>flask</code> for web development.",
        "next-steps-projects": "Advanced Projects: Build a web app or an AI tool.",
        footer: "© 2025 Learn Python. All rights reserved.",
        privacy: "Privacy Policy",
        terms: "Terms of Use",
        "copy-code": "Copy Code",
        "copy-success": "Code copied!",
        "form-name": "Name:",
        "form-email": "Email:",
        "form-message": "Message:",
        "form-submit": "Submit",
        "dropdown-title": "More Options",
        "dropdown-item1": "Advanced Python",
        "dropdown-item2": "Python Libraries",
        "social-media": "Follow Us"
    },
    ar: {
        title: "الأساسيات وكيفية البدء مع بايثون",
        "page-title": "الأساسيات وكيفية البدء مع بايثون",
        home: "الرئيسية",
        about: "حول",
        courses: "الدورات",
        contact: "اتصل بنا",
        "section-title": "الأساسيات وكيفية البدء مع بايثون",
        intro: "بايثون هي لغة برمجة قوية وسهلة التعلم تُستخدم في تطوير الويب، تحليل البيانات، الذكاء الاصطناعي، وتعلم الآلة. في هذا الدليل، سنتناول الأساسيات ونستعرض كيفية البدء مع بايثون خطوة بخطوة.",
        "why-python": "لماذا تتعلم بايثون؟",
        "why-python-desc": "بايثون تتميز بسهولة بناء الجملة، مما يجعلها مثالية للمبتدئين. كما أنها تحتوي على مكتبات قوية مثل <code>pandas</code>، <code>numpy</code>، و<code>tensorflow</code> التي تُستخدم في مجالات متقدمة. بايثون هي الخيار الأول للعديد من الشركات مثل Google وNetflix.",
        installation: "تثبيت بايثون",
        "installation-desc": "للبدء، قم بتحميل أحدث نسخة من بايثون من <a href='https://www.python.org/downloads/' target='_blank' rel='noopener noreferrer' class='resource-link' aria-label='تحميل بايثون من الموقع الرسمي'>موقع بايثون الرسمي</a>. اتبع الخطوات التالية:",
        "install-windows": "لنظام ويندوز: قم بتنزيل المثبت وتأكد من تحديد خيار 'إضافة بايثون إلى PATH'.",
        "install-mac": "لنظام macOS: استخدم Homebrew (<code>brew install python</code>) أو المثبت من الموقع الرسمي.",
        "install-linux": "لنظام لينكس: استخدم <code>sudo apt install python3</code> (لأوبونتو) أو مدير الحزم الخاص بنظامك.",
        "verify-install": "تحقق من التثبيت باستخدام الأمر: <code>python3 --version</code> أو <code>python --version</code>.",
        "first-steps": "خطوات البداية الأولى",
        "first-steps-desc": "ابدأ بكتابة برامج بسيطة لفهم بناء الجملة في بايثون.",
        "writing-code": "كتابة أول برنامج: افتح محرر نصوص واكتب: <code>print('Hello, World!')</code>. احفظ الملف باسم <code>hello.py</code> وشغله باستخدام <code>python3 hello.py</code>.",
        "run-code": "احفظ الكود في ملف <code>hello.py</code> وشغله باستخدام <code>python3 hello.py</code>.",
        "basic-syntax": "أساسيات بناء الجملة",
        "basic-syntax-desc": "بايثون يعتمد على بساطة الكود. إليك بعض الأمثلة الأساسية:",
        variables: "المتغيرات:",
        conditionals: "الشروط:",
        loops: "الحلقات:",
        functions: "الدوال",
        "functions-desc": "الدوال تتيح إعادة استخدام الكود. مثال:",
        lists: "القوائم",
        "lists-desc": "القوائم تُستخدم لتخزين مجموعة من البيانات:",
        projects: "مشاريع عملية",
        "projects-desc": "جرب هذه المشاريع البسيطة لتطبيق مهاراتك:",
        "project-calculator": "حاسبة بسيطة",
        "project-calculator-desc": "اكتب برنامجًا يطلب من المستخدم إدخال رقمين وعملية حسابية:",
        "project-game": "لعبة تخمين الأرقام",
        "project-game-desc": "برنامج يختار رقمًا عشوائيًا ويطلب من المستخدم تخمينه:",
        resources: "موارد تعليمية",
        "resources-desc": "استكشف هذه الموارد لتعلم المزيد:",
        "next-steps": "الخطوات التالية",
        "next-steps-desc": "بعد إتقان الأساسيات، جرب هذه المواضيع المتقدمة:",
        "next-steps-oop": "البرمجة الكائنية (OOP): تعلم الكلاسات والوراثة.",
        "next-steps-libraries": "مكتبات بايثون: جرب <code>pandas</code> لتحليل البيانات أو <code>flask</code> لتطوير الويب.",
        "next-steps-projects": "مشاريع متقدمة: بناء تطبيق ويب أو أداة ذكاء اصطناعي.",
        footer: "© 2025 تعلم لغة بايتون. جميع الحقوق محفوظة.",
        privacy: "سياسة الخصوصية",
        terms: "شروط الاستخدام",
        "copy-code": "نسخ الكود",
        "copy-success": "تم نسخ الكود!",
        "form-name": "الاسم:",
        "form-email": "البريد الإلكتروني:",
        "form-message": "الرسالة:",
        "form-submit": "إرسال",
        "dropdown-title": "خيارات إضافية",
        "dropdown-item1": "بايثون المتقدم",
        "dropdown-item2": "مكتبات بايثون",
        "social-media": "تابعنا"
    }
};

// وظيفة لتحديث الترجمات مع الحفاظ على العناصر الفرعية
function updateTranslations(lang) {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translation = translations[lang][key] || `Translation missing for ${key}`;
        if (el.children.length > 0) {
            const textNode = Array.from(el.childNodes).find(node => node.nodeType === Node.TEXT_NODE);
            if (textNode) {
                textNode.textContent = translation;
            } else {
                el.innerHTML = translation;
            }
        } else {
            el.innerHTML = translation;
        }
        if (!translations[lang][key]) {
            console.warn(`Translation missing for key: ${key} in language: ${lang}`);
        }
    });
}

// إضافة أزرار نسخ الكود وتحديث الترجمات
document.addEventListener('DOMContentLoaded', () => {
    const lang = localStorage.getItem('preferredLanguage') || 'ar';
    document.getElementById('language-select').value = lang;
    updateTranslations(lang);

    // إضافة زر نسخ لكل مثال كود
    document.querySelectorAll('.course-example').forEach(example => {
        const button = document.createElement('button');
        button.className = 'copy-button';
        button.setAttribute('data-i18n', 'copy-code');
        button.textContent = translations[lang]['copy-code'] || 'Copy Code';
        button.onclick = () => {
            const code = example.querySelector('code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert(translations[lang]['copy-success'] || 'Code copied!');
            });
        };
        example.appendChild(button);
    });
});

// تغيير اللغة عند اختيار لغة جديدة
document.getElementById('language-select').addEventListener('change', function() {
    const lang = this.value;
    updateTranslations(lang);
    localStorage.setItem('preferredLanguage', lang);

    // تحديث نص أزرار نسخ الكود
    document.querySelectorAll('.copy-button').forEach(button => {
        button.textContent = translations[lang]['copy-code'] || 'Copy Code';
    });
});
